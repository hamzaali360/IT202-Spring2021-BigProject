<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>repl.it</title>
	<!-- <link href="style.css" rel="stylesheet" type="text/css" /> -->
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous"> -->
	<style>
		#topnav {
			background-color: silver;
			padding: 4px;
		}

		#content {
			font-size: 2em;
		}

		.screen {
			display: none;
		}
	</style>
	<style type="text/css">
		#mapDisplay {
			height: 400px;
		}

		html,
		body {
			height: 100%;
			margin: 0;
			padding: 0;
		}
	</style>
	<style>
		p {
			font-size: 20px;
			margin-left: 20px;
		}
	</style>
	<style>
		.my-card-content {
			padding: 16px;
      margin-left: 20px;
      
		}
    .my-card {
      margin-top: 20px;
  height: auto;
  width: 50%;
}
.h1{
  font-size: 15px;
}
	</style>
</head>

<head>
	<link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
	<script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js">
	</script>
</head>

<body>
	<div id="topnav">
		<a data-screen="home">
			<div class="mdc-touch-target-wrapper">
				<button class="mdc-button mdc-button--touch">
          
    <span class="mdc-button__ripple"></span>
    <span class="mdc-button__label">Home</span>
    <span class="mdc-button__touch"></span>
  </button>
</div>
</a>
      <a  
      data-screen= "form">
      <div class="mdc-touch-target-wrapper">
  <button class="mdc-button mdc-button--touch">
    <span class="mdc-button__ripple"></span>
    <span class="mdc-button__label">Search Resturant</span>
    <span class="mdc-button__touch"></span>
  </button>
</div>
</a>
       <a 
      data-screen= "data">
           <div class="mdc-touch-target-wrapper">
  <button class="mdc-button mdc-button--touch">
    <span class="mdc-button__ripple"></span>
    <span class="mdc-button__label">Resturant Info</span>
    <span class="mdc-button__touch"></span>
  </button> </div>
  </a>
       <a 
      data-screen= "map">
           <div class="mdc-touch-target-wrapper">
  <button class="mdc-button mdc-button--touch">
    <span class="mdc-button__ripple"></span>
    <span class="mdc-button__label">Resturant Location</span>
    <span class="mdc-button__touch"></span>
  </button></div>
  </a>
       <!-- <a
      data-screen= "about">About</a> -->
      </div>
   <div id = "content"style = "margin-left: 20px">
     <div class = "screen" id = "home" > Hello H</div>

    <div class = "screen" id = "form" > 
      <form id="dataSearch">
      <select name="aka_name" id="aka_name">
        <option></option>
      </select>
      </form>
      <div class="mdc-touch-target-wrapper newColor" id= "search">
 
    <button class="mdc-button mdc-button--raised">
  
  <span class="mdc-button__label ">Search Resturant</span>
</button></div>
<div id="results"></div>
    </div>

    <div class = "screen" id = "data"> 
       <div id = "dataDisplay"></div>
    </div>

    <div class = "screen" id = "map"> Hello M</div>
   </div>

   <!-- <div class="mdc-card my-card my-card-content " style = "display: none" id = "createCard">  
      <div class="mdc-card-wrapper__text-section">
      <h1 class="mdc-card__title" id = "cardTitle">Card Title</h1>
      <div class="mdc-card__subhead" id= "cardAddress">Secondary text</div>
    </div>
      <div class="mdc-card-wrapper__text-section"><div class="mdc-card__supporting-text" id = "cardInfo">
          Greyhound divisively hello coldly wonderfully marginally far upon
          excluding.
        </div></div>
    </div> -->

    <div class="mdc-card mdc-card--outlined my-card my-card-content" style = "display: none" id = "createCard">
		<div class="mdc-card-wrapper__text-section ">
			<div class="demo-card__title" id = "cardTitle">Card title</div>
			<div class="demo-card__subhead"id= "cardAddress"style = "font-size: 20px">Secondary text</div>

		</div>
		<div class="mdc-card-wrapper__text-section">
			<div class="demo-card__supporting-text "id= "violation"style = "font-size: 10px">
				Greyhound divisively hello coldly wonderfully marginally far upon excluding.
			</div>
      
		</div>

    </div>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script> -->
    <script>
      let startScreen = document.location.search.replace("?", "");

      document.querySelector("#home").style.display = "block"

      let navAnchors =document.querySelectorAll("div#topnav a")

      navAnchors.forEach( (anchor)=> {
        anchor.addEventListener("click", (event)=> {
          document.querySelectorAll(".screen").forEach( (screen)=> {
        screen.style.display = "none";
       
        
      })
      
      let archor = event.target.parentNode.parentNode.parentNode
         let screen = archor.getAttribute("data-screen");
 //console.log(screen)
         let targetScreen = document.querySelector("#" + screen);
        
         targetScreen.style.display = "block";
        })
      })
      
      </script>

        <script>
   //creating the search
   let resturantData = "https://data.cityofchicago.org/resource/4ijn-s7e5.json?facility_type=Restaurant"
    fetch(resturantData)
      .then ( (response) => {return response.json() })
      .then ( (result) => {

          // if sorting by a string value, need a more complex sort function
          result.sort((a, b) => {
            if (a === b) {
              return 0;
            }
            return a.aka_name < b.aka_name ? -1 : 1;
          });

          for (let area of result) {
            let opt = document.createElement("option");
            opt.innerText = area.aka_name; // + " ("+ area.address + ")";
            document.querySelector("#aka_name").append(opt);
      
          }
      })
let resturantData2 = "https://data.cityofchicago.org/resource/4ijn-s7e5.json";

      document.querySelector("#search").addEventListener ("click", (e) => {
          document.querySelector("#dataDisplay").innerText = "fetching results";
          document.querySelector("#results").innerText = "fetching results";

          let f = document.querySelector("form");
          console.log(f);
          let fd = new FormData(f);
          let sp = new URLSearchParams(fd);

          let url = resturantData2 +  "?" + sp.toString();
          // fetch
       console.log(url);   fetch (url)
            .then ( (response) => { return response.json() })
            .then ( (datas) => {
                document.querySelector("#results").innerText = "Results found: " + datas.length;  
 
                for (let item of datas) {   
                
              let clone = document.querySelector("#createCard").cloneNode(true);
              clone.style.display = "block";
              clone.querySelector("div#cardTitle").innerText = item["aka_name"];
              clone.querySelector("div#cardAddress").innerText = item["address"];clone.querySelector("div#violation").innerText = item["violations"];
              document.querySelector("#dataDisplay").append(clone);
              
                }    
            })
      });
      </script>
  
  </body>
</html>